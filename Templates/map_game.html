<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
        integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
        crossorigin=""></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <style>
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
        }


        .eventButton {
            position: absolute;
            bottom: 0;
            z-index: 410;
            cursor: pointer;
            width: 5%;
            height: 15%;
            border: 1px solid #777;
            justify-content: center;
            align-items: center;
            display: flex;
            padding: 6px 8px;
            font: 12px/14px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            transition: 500ms, ease-in;

        }

        .eventText {
            margin: 0 0 5px;
            color: #777;

        }

        .eventButton:hover,
        .eventText:hover {
            color: black;
            border: 1px solid black;
            transition: 500ms, ease-in;
            padding: 8px 10px;
        }

        .onScreenObj {
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            display: flex;
            color: black;
            border: 1px solid black;
            font-weight: bold;
            width: fit-content;
            height: 22px;

        }


        .hide {
            width: 0px !important;
            height: 0px !important;
            overflow: hidden !important;

        }

        .info {
            position: absolute;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            color: black;
            border: 1px solid black;
            font-weight: bold;
            z-index: 410;
            width: fit-content;
            font-size: 20px;
            display: flex;
            top: 10%;
            cursor: pointer;
        }

        .wholeScreen {
            position: absolute;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            color: black;
            border: 1px solid black;
            font-weight: bold;
            z-index: 410;
            height: fit-content;
            width: 99vw;
            border-radius: 5px;
            font-size: 20px;
            align-items: center;
        }

        .leaflet-top {
            top: 10%;
            transform: translate(0%, 10%);
        }

        .leaflet-left {
            right: 1%;

        }
        .start
        {
            position: absolute;
            font: 14px/16px Arial, Helvetica, sans-serif;
            background: white;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            color: black;
            border: 1px solid black;
            font-weight: bold;
            z-index: 410;
            height: 290px;
            width: 690px;
            border-radius: 5px;
            font-size: 20px;
            align-items: center;
            bottom: 50%;
            left:50%;
            text-align: center;
            margin: -145px 0 0 -345px;
            
        }
    </style>
</head>

<body>

    <div id="map"></div>
    <div id="event1" class='leaflet-bar eventText eventButton' style="left: 50%;">
        <h4 id='e1h4'>Event 1 3s</h4>
    </div>
    <div id="event2" class='leaflet-bar eventText eventButton' style="left: 43%;">
        <h4 id='e2h4'>Event 2 5s</h4>
    </div>
    <div id="event3" class='leaflet-bar eventText eventButton' style="left: 57%;">
        <h4 id='e3h4'>Event 3 7s</h4>
    </div>
    <div id="event4" class='leaflet-bar eventText eventButton' style="left: 64%;">
        <h4 id='e4h4'>Event 4 9s</h4>
    </div>
    <div id="event5" class='leaflet-bar eventText eventButton' style="left: 36%;">
        <h4 id='e5h4'>Event 5 11s</h4>
    </div>

    <div id="infoMenu" class='info' style="right: 1%;height: fit-content;">
        <table>
            <tr>
                <th style="text-decoration: underline; float: left;">Info</th>
                <th style="text-decoration: underline; float: right;">Stats</th>
            </tr>
            <tr></tr>
            <tr>
                <td style="float: left;">Oxygen:</td>
                <td style="float: right;" id='o2Level'> %%</td>
            </tr>
            <tr>
                <td style="float: left;">Active Events:&emsp;</td>
                <td style="float: right;" id='eventList'>event here</td>
            </tr>
        </table>
    </div>
    <div id="infoMenu" class='wholeScreen'>
        <marquee direction='right'>

        </marquee>
    </div>

        <div class="start" id = 'startScreen'>
            <h1 >Map Game!</h1>
            <h4>By, Spencer Evans-Cole</h4>
            <p style="line-height: 1.3;">The goal of this game is to have the oxygen level be above 80% by the end of the year. To do this there are 5 events you can use at the bottom of the screen to prevent disasters. Disaster periodicly happen and will ramp up over time. Good luck!</p>
            <button style="padding: 8px 20px; background-color: transparent; border: 2px solid black; font-size: 20px; font-weight: bold; border-radius: 5px;cursor: pointer;" onclick="start()">
                Play!</button>
        </div>
    
   
</body>
<script>
    let running = false;
    let minutes = 0;
    let hours = 0;
    let days = 1;
    let months = 0;
    let e1ready = false;
    let e2ready = false;
    let e3ready = false;
    let e4ready = false;
    let e5ready = false;
    let monthNames = ["January", "Feburary", "March", "April", "May", "June", "July", "August", "September",
        "October", "November", "December"
    ];
    let monthDays = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    let oxygenLevel = 75;
    let map = L.map('map').setView([0, 0], 2);
    L.tileLayer('https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=gFX05mk9hDIatdpgPG7C', {
        attribution: '<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',
        maxZoom: 18,
        tileSize: 512,
        zoomOffset: -1,
        zoomControl: false
    }).addTo(map);
    let timer = L.control({
        position: 'topleft'
    })
    map.zoomControl.remove();
    L.control.zoom({
        position: 'bottomleft'
    }).addTo(map)

    timer.onAdd = function (map) {
        this._div = L.DomUtil.create('div', 'onScreenObj')
        this._div.innerHTML = 'January 1 0:1';
        return this._div;

    }



    timer.addTo(map)
    function oLevel()
    {
        setInterval( function(){
        document.getElementById('o2Level').innerHTML = oxygenLevel + '%'
        },100)
    }
    function Cool1()

    {
        let num = 3;


        setInterval(function () {

            num--;

            if (num < 0) {
                document.getElementById('e1h4').innerHTML = " "
                num = ' is ready!'
                document.getElementById('e1h4').innerHTML += 'Event 1 ' + num
                e1ready = true;
            }
            if (num > 0) {
                document.getElementById('e1h4').innerHTML = "Event 1 in " + num + 's';
                e1ready = false;
            }
            return e1ready;
        }, 1000)

    }

    function Cool2() {
        let num = 5;
        setInterval(function () {

            num--;

            if (num < 0) {
                document.getElementById('e2h4').innerHTML = " "
                num = ' is ready!'
                document.getElementById('e2h4').innerHTML += 'Event 2' + num;
                e2ready = true;
            }
            if (num > 0) {
                document.getElementById('e2h4').innerHTML = "Event 2 in " + num + 's';
                e2ready = false;
            }
            return e2ready;
        }, 1000)

    }

    function Cool3()

    {
        let num = 7;


        setInterval(function () {

            num--;

            if (num < 0) {
                document.getElementById('e3h4').innerHTML = " "
                num = ' is ready!'
                document.getElementById('e3h4').innerHTML += 'Event 3 ' + num;
                e3ready = true;
            }
            if (num > 0) {
                document.getElementById('e3h4').innerHTML = "Event 3 in " + num + 's';
                e2ready = false;
            }
            return e3ready;
        }, 1000)
    }

    function Cool4()

    {
        let num = 9;


        setInterval(function () {

            num--;

            if (num < 0) {
                document.getElementById('e4h4').innerHTML = " "
                num = ' is ready!'
                document.getElementById('e4h4').innerHTML += 'Event 4 ' + num
                e4ready = true;
            }
            if (num > 0) {
                document.getElementById('e4h4').innerHTML = "Event 1 " + num + 's';
                e4ready = false;
            }
        }, 1000)
    }

    function Cool5()

    {
        let num = 11;


        setInterval(function () {

            num--;

            if (num < 0) {
                document.getElementById('e5h4').innerHTML = " "
                num = ' is ready!'
                document.getElementById('e5h4').innerHTML += 'Event 1 ' + num
            }
            if (num > 0) {
                document.getElementById('e5h4').innerHTML = "Event 1 " + num + 's';
            }
        }, 1000)
    }

    function tick() {
        setInterval(function () {

            minutes++;
            if (minutes === 60) {
                hours++;
                minutes = 0;

                if (hours === 24) {
                    days++;
                    hours = 0;
                    if (days === monthDays[months] + 1) {
                        months++;
                        days = 1;
                    }

                }
            }


            timer._div.innerHTML = monthNames[months] + " " + days + " " + hours + ":" + minutes;
        }, 1)
    }

    tick()
    Cool1()
    Cool2()
    Cool3()
    Cool4()
    Cool5()
    oLevel()
</script>

</html>